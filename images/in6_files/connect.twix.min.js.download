function cx_init_settings(){let n=document.getElementById("suthConnectScript");if(n&&(window._suthConnectSettings.environment=n.getAttribute("data-environment"),window._suthConnectSettings.environment=="lab"&&(window._suthConnectSettings.stylesBaseUrl="https://connectchat.azurewebsites.net",window._suthConnectSettings.surveyBaseUrl="https://bbapi.suth.com/create",window._suthConnectSettings.genesysBaseUrl="https://gms-mars.sutherlandconnect.dev/genesys/2",window._suthConnectSettings.webchatPredicate="/chat/dove-dev_bot",window._suthConnectSettings.interactionPredicate="/openmedia/social/{sessionId}/get",window._suthConnectSettings.hooPredicate="",window._suthConnectSettings.agentStatPredicate="",window._suthConnectSettings.platformName="Lab",window._suthConnectSettings.tenantName="SGS",window._suthConnectSettings.clientName="MARS"),window._suthConnectSettings.brand=n.getAttribute("data-product")),window._suthConnectSettings.hooPredicate!==""){let n;n=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP");n.onreadystatechange=function(){if(this.readyState===4&&this.status===200){console.debug("Office Hours Data",this.responseText);let n=JSON.parse(this.responseText);if(n.error===null&&n.open_for>"00:00")if(window._suthConnectSettings.agentStatPredicate==="")cx_init_widget();else{let n;n=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP");n.onreadystatechange=function(){if(this.readyState===4&&this.status===200){console.debug("Agent Availability",this.responseText);let n=JSON.parse(this.responseText);n.value>0&&cx_init_widget()}};n.open("Post",window._suthConnectSettings.webchatPredicate+window._suthConnectSettings.agentStatPredicate,!0);n.setRequestHeader("authorization","Basic RFJnbXM6cGFzc3dvcmQ=");n.send()}}};n.open("GET",window._suthConnectSettings.webchatPredicate+window._suthConnectSettings.hooPredicate,!0);n.send()}else cx_init_widget()}function cx_init_widget(){let n={"en-US":{webchat:{ChatButton:"Chat",ChatStarted:"Chat Started",ChatEnded:"Chat Ended",AgentNameDefault:"Agent",AgentConnected:"<%Agent%> Connected",AgentDisconnected:"<%Agent%> Disconnected",BotNameDefault:"Bot",BotConnected:"<%Bot%> Connected",BotDisconnected:"<%Bot%> Disconnected",SupervisorNameDefault:"Supervisor",SupervisorConnected:"<%Agent%> Connected",SupervisorDisconnected:"<%Agent%> Disconnected",AgentTyping:"...",AriaAgentTyping:"Agent is typing",AgentUnavailable:"Sorry. There are no agents available. Please try later.",ChatTitle:"Live Chat",ChatEnd:"X",ChatClose:"X",ChatMinimize:"Min",ChatFormFirstName:"First Name",ChatFormLastName:"Last Name",ChatFormNickname:"Name",ChatFormEmail:"Email Address",ChatFormContactReason:"Contact Reason*",ChatFormContactReasonOptions:[{text:"Please Select...",value:"",selected:!1,group:!1},{text:"Product Quality Concerns",value:"quality_option",selected:!1,group:!1},{text:"Feedback",value:"feedback_option",selected:!1,group:!1},{text:"Business Opportunities",value:"business_option",selected:!1,group:!1},{text:"Promotions",value:"promotions_option",selected:!1,group:!1},{text:"Coupons and Samples",value:"coupon_option",selected:!1,group:!1},{text:"Nutritional Info",value:"ingredient_option",selected:!1,group:!1},{text:"Where to Buy",value:"product_option",selected:!1,group:!1},{text:"Follow up on an open case",value:"open_case",selected:!1,group:!1}],ChatFormPlaceholderFirstName:"Optional",ChatFormPlaceholderLastName:"Optional",ChatFormPlaceholderNickname:"Optional",ChatFormPlaceholderEmail:"Optional",ChatFormPlaceholderContactReason:"Required",ChatFormAgeGate:"Are you above the age of 16?",ChatFormSubmit:"Start Chat",AriaChatFormSubmit:"Start Chat",ChatFormCancel:"Cancel",AriaChatFormCancel:"Cancel Chat",ChatFormClose:"Close",ChatInputPlaceholder:"Type your message here",ChatInputSend:"Send",AriaChatInputSend:"Send",ChatEndQuestion:"Are you sure you want to end this chat session?",ChatEndCancel:"Cancel",ChatEndConfirm:"End chat",AriaChatEndCancel:"Cancel",AriaChatEndConfirm:"End",ConfirmCloseWindow:"Are you sure you want to close chat?",ConfirmCloseCancel:"Cancel",ConfirmCloseConfirm:"Close",AriaConfirmCloseCancel:"Cancel",AriaConfirmCloseConfirm:"Close",ActionsDownload:"Download transcript",ActionsEmail:"Email transcript",ActionsPrint:"Print transcript",ActionsCobrowseStart:"Start Co-browse",AriaActionsCobrowseStartTitle:"Opens the Co-browse session",ActionsSendFile:"Attach Files",AriaActionsSendFileTitle:"Opens a file upload dialog",ActionsEmoji:"Send Emoji",ActionsCobrowseStop:"Exit Co-browse",ActionsVideo:"Invite to Video Chat",ActionsTransfer:"Transfer",ActionsInvite:"Invite",InstructionsTransfer:"Open this link on another device to transfer your chat session<\/br><\/br><%link%>",InstructionsInvite:"Share this link with another person to add them to this chat session<\/br><\/br><%link%>",InviteTitle:"Need help?",InviteBody:"Let us know if we can help out.",InviteReject:"No thanks",InviteAccept:"Start chat",AriaInviteAccept:"Accept invite and start chat",AriaInviteReject:"Reject invite",ChatError:"There was a problem starting the chat session. Please retry.",ChatErrorButton:"OK",AriaChatErrorButton:"OK",ChatErrorPrimaryButton:"Yes",ChatErrorDefaultButton:"No",AriaChatErrorPrimaryButton:"Yes",AriaChatErrorDefaultButton:"No",DownloadButton:"Download",AriaDownloadButton:"Download the file",FileSent:"has sent:",FileTransferRetry:"Retry",AriaFileTransferRetry:"Retry the file transfer",FileTransferError:"OK",AriaFileTransferError:"OK",FileTransferCancel:"Cancel",AriaFileTransferCancel:"Cancel file transfer",RestoreTimeoutTitle:"Chat ended",RestoreTimeoutBody:"Your previous chat session has timed out. Would you like to start a new one?",RestoreTimeoutReject:"No thanks",RestoreTimeoutAccept:"Start chat",AriaRestoreTimeoutAccept:"Accept invite and start chat",AriaRestoreTimeoutReject:"Reject invite",EndConfirmBody:"Would you really like to end your chat session?",EndConfirmAccept:"End chat",EndConfirmReject:"Cancel",AriaEndConfirmAccept:"End chat",AriaEndConfirmReject:"Cancel",SurveyOfferQuestion:"Would you like to participate in a survey?",ShowSurveyAccept:"Yes",ShowSurveyReject:"No",AriaShowSurveyAccept:"Yes",AriaShowSurveyReject:"No",UnreadMessagesTitle:"unread",AriaYouSaid:"You said",AriaSaid:"said",AriaSystemSaid:"System said",AriaWindowLabel:"Live Chat Window",AriaMinimize:"Live Chat Minimize",AriaMaximize:"Live Chat Maximize",AriaClose:"Live Chat Close",AriaEmojiStatusOpen:"Emoji picker dialog is opened",AriaEmojiStatusClose:"Emoji picker dialog is closed",AriaEmoji:"emoji",AriaEmojiPicker:"Emoji Picker",AriaCharRemaining:"Characters remaining",AriaMessageInput:"Message box",AsyncChatEnd:"End Chat",AsyncChatClose:"Close Window",AriaAsyncChatEnd:"End Chat",AriaAsyncChatClose:"Close Window",DayLabels:["Sun","Mon","Tue","Wed","Thur","Fri","Sat"],MonthLabels:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sept","Oct","Nov","Dec"],todayLabel:"Today",Errors:{"102":"First name is required.","103":"Last name is required.","161":"Please enter your name.","201":"The file could not be sent.<br/><strong><p class='filename' title='<%FilenameFull%>'>'<%FilenameTruncated%>'<\/p><\/strong><p class='cx-advice'>The maximum number of attached files would be exceeded (<%MaxFilesAllowed%>).<\/p>","202":"The file could not be sent.<br/><strong><p class='filename' title='<%FilenameFull%>'>'<%FilenameTruncated%>'<\/p><\/strong><p class='cx-advice'>Upload limit and/or maximum number of attachments would be exceeded (<%MaxAttachmentsSize%>).<\/p>","203":"The file could not be sent.<br/><strong><p class='filename' title='<%FilenameFull%>'>'<%FilenameTruncated%>'<\/p><\/strong><p class='cx-advice'>File type is not allowed.<\/p>","204":"We're sorry but your message is too long. Please write a shorter message.","240":"We're sorry but we cannot start a new chat at this time. Please try again later.","364":"Invalid email address.","401":"We're sorry but we are not able to authorize the chat session. Would you like to start a new chat?","404":"We're sorry but we cannot find your previous chat session. Would you like to start a new chat?","500":"We're sorry, an unexpected error occurred with the service. Would you like to close and start a new Chat?","503":"We're sorry, the service is currently unavailable or busy. Would you like to close and start a new Chat again?",ChatUnavailable:"We're sorry but we cannot start a new chat at this time. Please try again later.",CriticalFault:"Your chat session has ended unexpectedly due to an unknown issue. We apologize for the inconvenience.",StartFailed:"There was an issue starting your chat session. Please verify your connection and that you submitted all required information properly, then try again.",MessageFailed:"Your message was not received successfully. Please try again.",RestoreFailed:"We're sorry but we were unable to restore your chat session due to an unknown error.",TransferFailed:"Unable to transfer chat at this time. Please try again later.",FileTransferSizeError:"The file could not be sent.<br/><strong><p class='filename' title='<%FilenameFull%>'>'<%FilenameTruncated%>'<\/p><\/strong><p class='cx-advice'>File size is larger than the allowed size (<%MaxSizePerFile%>).<\/p>",InviteFailed:"Unable to generate invite at this time. Please try again later.",ChatServerWentOffline:"Messages are currently taking longer than normal to get through. We're sorry for the delay.",RestoredOffline:"Messages are currently taking longer than normal to get through. We're sorry for the delay.",Disconnected:"<div style='text-align:center'>Connection lost<\/div>",Reconnected:"<div style='text-align:center'>Connection restored<\/div>",FileSendFailed:"The file could not be sent.<br/><strong><p class='filename' title='<%FilenameFull%>'><%FilenameTruncated%><\/p><\/strong><p class='cx-advice'>There was an unexpected disconnection. Try again?<\/p>",Generic:"<div style='text-align:center'>An unexpected error occurred.<\/div>","pureengage-v3-rest-INVALID_FILE_TYPE":"Invalid file type. Only Images are allowed.","pureengage-v3-rest-LIMIT_FILE_SIZE":"File size is larger than the allowed size.","pureengage-v3-rest-LIMIT_FILE_COUNT":"The maximum number of attached files exceeded the limit.","pureengage-v3-rest-INVALID_CONTACT_CENTER":"Invalid x-api-key transport configuration.","pureengage-v3-rest-INVALID_ENDPOINT":"Invalid endpoint transport configuration.","pureengage-v3-rest-INVALID_NICKNAME":"First Name is required.","pureengage-v3-rest-AUTHENTICATION_REQUIRED":"We're sorry but we are not able to authorize the chat session.","purecloud-v2-sockets-400":"Sorry, something went wrong. Please verify your connection and that you submitted all required information properly, then try again.","purecloud-v2-sockets-500":"We're are sorry, an unexpected error occurred with the service.","purecloud-v2-sockets-503":"We're sorry, the service is currently unavailable."}}}},i=[];n[window._suthConnectSettings.language].webchat.ChatFormContactReasonOptions.forEach(function(n){let t={};t.text=n.text;t.value=n.value;n.selected&&(t.selected="selected");n.group&&(t.group=!0);i.push(t)});let u={wrapper:"<table><\/table>",inputs:[{id:"cx_webchat_form_firstname",name:"firstname",maxlength:"100",validateWhileTyping:!1,autocomplete:"off",placeholder:"@i18n:webchat.ChatFormPlaceholderFirstName",label:"@i18n:webchat.ChatFormFirstName",value:"",validate:function(n,t,i,r,u){return i&&u("#cx_webchat_form_firstname")&&u("#cx_webchat_form_lastname")&&u("#cx_webchat_form_nickname")&&(u("#cx_webchat_form_firstname").val()||u("#cx_webchat_form_lastname").val()?u("#cx_webchat_form_nickname").val((u("#cx_webchat_form_firstname").val()+" "+u("#cx_webchat_form_lastname").val()).trim()).change():u("#cx_webchat_form_nickname").val("Anon Chat").change()),!0}},{id:"cx_webchat_form_lastname",name:"lastname",maxlength:"100",autocomplete:"off",validateWhileTyping:!1,placeholder:"@i18n:webchat.ChatFormPlaceholderLastName",label:"@i18n:webchat.ChatFormLastName",value:"",validate:function(n,t,i,r,u){return i&&u("#cx_webchat_form_firstname")&&u("#cx_webchat_form_lastname")&&u("#cx_webchat_form_nickname")&&(u("#cx_webchat_form_firstname").val()||u("#cx_webchat_form_lastname").val()?u("#cx_webchat_form_nickname").val((u("#cx_webchat_form_firstname").val()+" "+u("#cx_webchat_form_lastname").val()).trim()).change():u("#cx_webchat_form_nickname").val("Anon Chat").change()),!0}},{id:"cx_webchat_form_email",name:"email",maxlength:"100",autocomplete:"off",placeholder:"@i18n:webchat.ChatFormPlaceholderEmail",label:"@i18n:webchat.ChatFormEmail",type:"email",validateWhileTyping:!1},{id:"cx_webchat_form_subject",name:"subject",type:"select",autocomplete:"off",options:i,validateWhileTyping:!1,placeholder:"@i18n:webchat.ChatFormPlaceholderContactReason",label:"@i18n:webchat.ChatFormContactReason",validate:function(n,t,i){return i?i.val()?!0:!1:!1}},{id:"cx_webchat_form_age",name:"age_gate",type:"checkbox",autocomplete:"off",validateWhileTyping:!1,label:"@i18n:webchat.ChatFormAgeGate",wrapper:"<tr><th colspan='2'>{label} {input}<\/th><\/tr>",validate:function(){return!0}},{id:"cx_webchat_form_nickname",name:"nickname",maxlength:"100",autocomplete:"off",placeholder:"@i18n:webchat.ChatFormPlaceholderNickname",label:"@i18n:webchat.ChatFormNickname",wrapper:"<tr style='display:none'><th>{label}<\/th><td>{input}<\/td><\/tr>",value:"Anon Chat"}]},t="/Mars/cx-theme-default.min.css";switch(window._suthConnectSettings.brand.toLowerCase()){case"twix":n[window._suthConnectSettings.language].webchat.ChatStarted="Hang on, Twix Bot is on the way!";t="/Mars/cx-theme-twix.min.css";window._suthConnectSettings.sendSurvey=!0;break;case"dev-dove":n[window._suthConnectSettings.language].webchat.ChatStarted="Hang on, Twix Bot is on the way!";t="/Mars/cx-theme-twix.min.css";window._suthConnectSettings.sendSurvey=!0;window._suthConnectSettings.brand="Twix";break;default:t="/Mars/cx-theme-default.min.css"}window._genesys.widgets={main:{debug:!1,themes:{light:"cx-theme-light",dark:"cx-theme-dark",mars:"cx-theme-mars"},theme:window._suthConnectSettings.theme,lang:window._suthConnectSettings.language,downloadGoogleFont:!1,googleFontUrl:"https://apps.mypurecloud.com/webfonts/roboto.css",i18n:n,customStylesheetID:"genesys-cx-custom-styles",plugins:["cx-webchat","cx-webchat-service"]},webchat:{dataURL:window._suthConnectSettings.genesysBaseUrl+window._suthConnectSettings.webchatPredicate,apikey:"",form:u,cometD:{enabled:!1,cometURL:"https://gms-mars.sutherlandconnect.dev/genesys/cometd",channel:"/service/chatV2/dove-dev_bot",apiURL:"https://gms-mars.sutherlandconnect.dev/genesys/2/chat-ntf",websocketEnabled:!0,logLevel:"info"},userData:{language:window._suthConnectSettings.language,country:window._suthConnectSettings.country,brand:window._suthConnectSettings.brand.toLowerCase()},markdown:!0,charCountEnabled:!1,maxMessageLength:500,ajaxTimeout:1e4,autoInvite:{enabled:!0,timeToInviteSeconds:5,inviteTimeoutSeconds:30},chatButton:{enabled:!0,effect:"fade",openDelay:1e3,effectDuration:300,hideDuringInvite:!0},uploadsEnabled:!1,emojis:!0,emojiList:"😀:grinning;😑:expressionles;😕:confuse;😗:kissing;😙:kissing_smiling_eyes;😛:stuck_out_tongue;😟:worried;😦:frowning;😧:anguished;😬:grimacing;😮:open_mouth;😯:hushed;😴:sleeping;"},onReady:function(n){n.subscribe("Toaster.ready",function(t){n.subscribe("Toaster.opened",function(n){cx_replaceBranding();console.debug(n)});console.debug(t)});n.subscribe("WebChat.opened",function(n){console.debug(n);cx_replaceBranding()});n.subscribe("WebChat.submitted",function(n){console.debug(n)});n.subscribe("WebChat.completed",function(t){if(console.debug(t),window._suthConnectSettings.sendSurvey){let i=`<div id='cx_chat_information'> <div class="cx-wrapper"><p class="i18n">Thank you for contacting us. Please provide your feedback by answering few survey questions.</p> <div class="cx-button-group cx-buttons-binary"> <button id='cxoverlaysuthsurvey' class='cx-end-confirm cx-btn cx-btn-primary i18n'>Start Survey</button>&nbsp;&nbsp;<button id='cxoverlaysuthclose' class='cx-end-cancel cx-btn cx-btn-default i18n'>Close</button></div> </div></div>`;n.command("WebChat.showOverlay",{html:i,hideFooter:!1}).done(function(){document.getElementById("cxoverlaysuthsurvey").addEventListener("click",function(){let u=window._suthConnectSettings.session.agent?window._suthConnectSettings.session.agent:"Bot",i=new URL(`${window._suthConnectSettings.surveyBaseUrl}`);i.searchParams.append("interactionID",window._suthConnectSettings.session.id);i.searchParams.append("interactionTime",t.data.started);i.searchParams.append("agent",u);i.searchParams.append("language",window._suthConnectSettings.language);i.searchParams.append("platformName",window._suthConnectSettings.platformName);i.searchParams.append("tenantName",window._suthConnectSettings.tenantName);i.searchParams.append("clientName",window._suthConnectSettings.clientName);i.searchParams.append("surveyName",window._suthConnectSettings.brand+"Survey");i.searchParams.append("brand",window._suthConnectSettings.brand);let r;r=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP");r.onreadystatechange=function(){if(this.readyState===4&&this.status===200){console.debug("interaction data",this.responseText);let n=JSON.parse(this.responseText),r=n.interactionProperties.interactionUserData.find(({key:n})=>n==="EmailAddress"),e=r?r.value:t.data.form.email?t.data.form.email:"Anonymous",u=n.interactionProperties.interactionUserData.find(({key:n})=>n==="crm_id"),f=u?u.value:null;i.searchParams.append("customerId",e);f&&i.searchParams.append("caseId",f);console.debug("surveyUrl",i.href);window.open(i.href)}if(this.readyState===4&&this.status!==200){console.warn("unable to get interaction data",this.responseText);let n=t.data.form.email?t.data.form.email:"Anonymous";i.searchParams.append("customerId",n);console.debug("surveyUrl",i.href);window.open(i.href)}};r.open("Post",window._suthConnectSettings.genesysBaseUrl+window._suthConnectSettings.interactionPredicate.replace("{sessionId}",window._suthConnectSettings.session.id),!0);r.send();n.command("WebChat.close")});document.getElementById("cxoverlaysuthclose").addEventListener("click",function(){n.command("WebChat.close")})}).fail(function(){})}});n.subscribe("WebChat.closed",function(n){console.debug(n);window._suthConnectSettings.session={}});n.subscribe("WebChat.cancelled",function(n){console.debug(n)});n.subscribe("WebChatService.started",function(n){console.debug(n);window._suthConnectSettings.session.id=n.data.sessionID});n.subscribe("WebChatService.ended",function(n){console.debug(n)});n.subscribe("WebChatService.botConnected",function(n){console.debug(n);window._suthConnectSettings.session.agent=n.data.message.from.name});n.subscribe("WebChatService.botDisconnected",function(n){console.debug(n)});n.subscribe("WebChatService.agentConnected",function(n){console.debug(n);window._suthConnectSettings.session.agent=n.data.message.from.name});n.subscribe("WebChatService.clientConnected",function(t){console.debug(t);window._suthConnectSettings.session.id||n.command("WebChatService.getSessionData").done(function(n){console.debug(n);window._suthConnectSettings.session.id=n.sessionID}).fail(function(n){console.warn(n)})})}};let r=[{type:"script",id:"genesys-cx-widget-script",path:window._suthConnectSettings.stylesBaseUrl+"/genesys/widgets.min.js"},{type:"link",id:"genesys-cx-widget-styles",path:window._suthConnectSettings.stylesBaseUrl+"/genesys/widgets.min.css"},{type:"link",id:"genesys-cx-custom-styles",path:window._suthConnectSettings.stylesBaseUrl+t}];for(let n=0;n<r.length;n++){let t=r[n],u=document.getElementsByTagName(t.type)[0];if(!document.getElementById(t.id)){let i=document.createElement(t.type);i.id=t.id;t.type==="script"?i.src=t.path:(i.type="text/css",i.rel="stylesheet",i.href=t.path);u?u.parentNode.insertBefore(i,u):document.head.appendChild(i)}}}function cx_replaceBranding(){let n="",t="";document.querySelectorAll(".cx-footer .cx-powered-by .cx-icon>svg").forEach(function(n){n.setAttribute("viewBox","0 0 362 79");n.style.width="92px";n.style.height="20px"});document.querySelectorAll(".cx-footer .cx-powered-by").forEach(function(n){n.innerHTML="&nbsp;"});document.querySelectorAll(".cx-sidebar .cx-branding .cx-icon > svg").forEach(function(n){n.style.width="24px";n.style.height="24px"});document.querySelectorAll(".cx-sidebar.cx-desktop .cx-branding").forEach(function(n){n.style.minWidth="170px"});document.querySelectorAll(".cx-sidebar.cx-desktop .cx-branding").forEach(function(n){n.style.height="auto"});document.querySelectorAll(".cx-branding .cx-svg-icon-tone1, .cx-icon.cx-branding-icon.cx-inert .cx-svg-icon-tone1").forEach(function(t){t.innerHTML=n});document.querySelectorAll(".cx-footer .cx-svg-icon-tone1").forEach(function(n){n.innerHTML=t});document.querySelectorAll(".cx-branding .cx-icon").forEach(function(){});document.querySelectorAll(".cx-icon.cx-branding-icon.cx-inert").forEach(function(){})}function cx_getUrlVars(){let t=[],n,i=window.location.href.slice(window.location.href.indexOf("?")+1).split("&");for(let r=0;r<i.length;r++)n=i[r].split("="),t.push(n[0]),t[n[0]]=n[1];return t}window._genesys||(window._genesys={});window._gt||(window._gt=[]);window._suthConnectSettings||(window._suthConnectSettings={sendSurvey:!1,stylesBaseUrl:"https://connectwidgets.sutherlandconnect.com",surveyBaseUrl:"https://survey.sutherlandconnect.com/create",genesysBaseUrl:"https://gms-mars.sutherlandconnect.com/genesys/2",webchatPredicate:"/chat/twix_bot",interactionPredicate:"/openmedia/social/{sessionId}/get",hooPredicate:"",agentStatPredicate:"",theme:"mars",language:"en-US",country:"United States",brand:null,platformName:"North American",tenantName:"SGS",clientName:"MARS",session:{}});window.addEventListener("load",function(){console.log("Initializing chat widget");cx_init_settings()});